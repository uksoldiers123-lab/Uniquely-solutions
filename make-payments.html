<!-- index.html (updated header/menu v8 and layout) -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Uniquity Solutions — Trusted Payments for 20+ Years</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css?v=8">
</head>
<body>
  <!-- Navbar -->
  <nav class="nav" aria-label="Primary">
    <div class="container nav-inner">
      <a class="brand" href="index.html">
        <span class="brand-mark" aria-hidden="true"></span>
        Uniquity Solutions
      </a>

      <div class="nav-links">
        <!-- On-page items -->
        <a href="index.html">Home</a>
        <a href="#services">Services</a>
        <a href="#partners">Partners</a>
        <a href="#careers">Careers</a>

        <!-- Desktop-only dropdown for separate pages -->
        <div class="dropdown" data-dropdown>
          <button class="drop-toggle" type="button" data-toggle aria-haspopup="true" aria-expanded="false">
            Get Started
            <svg class="drop-caret" width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <div class="drop-menu" data-menu role="menu">
            <a href="make-payments.html" role="menuitem">Make a Payment</a>
            <a href="create-account.html" role="menuitem">Create Account (Merchants)</a>
            <a href="faq.html" role="menuitem">FAQ</a>
            <a href="pricing.html" role="menuitem">Pricing</a>
            <a href="developers.html" role="menuitem">Developers & API</a>
            <a href="integrations.html" role="menuitem">Integrations</a>
            <a href="compliance.html" role="menuitem">Compliance & Security</a>
            <a href="login.html" role="menuitem">Login Portal</a>
          </div>
        </div>

        <a href="#contact" class="cta">Contact</a>
      </div>

      <button class="menu-btn" id="menuBtn" aria-expanded="false" aria-controls="mobileMenu">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M4 6h16M4 12h16M4 18h16" stroke="#fff" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
    </div>
  </nav>

  <!-- Mobile overlay menu OUTSIDE the nav -->
  <div id="mobileMenu" class="mobile-menu" role="dialog" aria-label="Mobile Navigation">
    <div class="menu-label">On this page</div>
    <a href="index.html">Home</a>
    <a href="#services">Services</a>
    <a href="#partners">Partners</a>
    <a href="#careers">Careers</a>
    <a href="#contact" class="cta">Contact</a>

    <div class="menu-label">More pages</div>
    <a href="make-payments.html">Make a Payment</a>
    <a href="create-account.html">Create Account (Merchants)</a>
    <a href="faq.html">FAQ</a>
    <a href="pricing.html">Pricing</a>
    <a href="developers.html">Developers & API</a>
    <a href="integrations.html">Integrations</a>
    <a href="compliance.html">Compliance & Security</a>
    <a href="login.html">Login Portal</a>
  </div>
  </nav>

  <main id="content" class="container" style="padding:24px 0 60px;">
    <section aria-labelledby="payment-title" class="section">
      <h2 id="payment-title" class="section-label" style="margin-bottom:12px;">
        <span class="dot" style="background:var(--primary); width:8px; height:8px; border-radius:50%; display:inline-block;"></span>
        Payment
      </h2>

      <div class="content-grid" style="grid-template-columns: 1fr 1fr; gap:28px;">
        <!-- Left: Payment form (Stripe) -->
        <div class="card" style="padding:20px;">
          <h3 style="margin-top:0;">Secure Checkout</h3>
          <form id="payment-form" autocomplete="on">
            <div class="field">
              <label class="label" for="payerName">Full name</label>
              <input id="payerName" name="payerName" class="input" type="text" placeholder="Jane Doe" required />
            </div>
            <div class="field">
              <label class="label" for="payerEmail">Email for receipt</label>
              <input id="payerEmail" name="payerEmail" class="input" type="email" placeholder="you@example.com" required />
            </div>
            <div class="field">
              <label class="label" for="invoiceNumber">Invoice or account number</label>
              <input id="invoiceNumber" name="invoiceNumber" class="input" type="text" placeholder="INV-12345" required />
            </div>

            <div class="field">
              <label class="label" for="amount">Amount (USD)</label>
              <input id="amount" name="amount" class="input" type="number" step="0.01" min="1" placeholder="100.00" required />
            </div>

            <div id="card-element" class="field" aria-label="Card details">
              <!-- Stripe Card Element will be inserted here -->
            </div>
            <div id="card-errors" role="alert" class="error" aria-live="polite"></div>

            <button id="submit" class="btn btn-primary" type="submit" style="margin-top:8px;">
              Pay securely
            </button>
            <div id="payment-status" class="small" style="margin-top:8px;"></div>
          </form>
        </div>

        <!-- Right: Help / info (optional) -->
        <aside class="card" style="padding:16px;">
          <h3 style="margin-top:0;">Need help?</h3>
          <p class="muted" style="color:#6b7280;">Have your invoice or account number ready. For issues, contact support.</p>
          <h4>Security & compliance</h4>
          <ul style="margin:0 0 8px; padding-left:20px;">
            <li>PCI DSS Level 1</li>
            <li>TLS encryption</li>
            <li>Tokenized data via Stripe Elements</li>
          </ul>
          <p class="small" style="font-size:12px;">
            Learn more: Compliance · Security
          </p>
        </aside>
      </div>
    </section>
  </main>

  <script src="https://js.stripe.com/v3/"></script>
  <script>
    // TODO: Replace with your actual publishable key
    const PUBLISHABLE_KEY = "pk_test_51Rv1XcJ8rYAVrZVt8iJlItcVIk0sOmnKiveDQUx1TVpr79thl3akjWJWVmvTa5QdWgMzk9ZBaXEAnelyZzI7yLkF00Ejbx8thQ";

    // Initialize Stripe
    const stripe = Stripe(PUBLISHABLE_KEY);
    const elements = stripe.elements();
    const card = elements.create("card", { style: { base: { fontSize: "16px", color: "#32325d" } } });
    card.mount("#card-element");

    // Real-time validation errors from the card Element
    card.on("change", function(event) {
      const displayError = document.getElementById("card-errors");
      if (event.error) {
        displayError.textContent = event.error.message;
      } else {
        displayError.textContent = "";
      }
    });

    // Handle form submission
    const form = document.getElementById("payment-form");
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      // Basic client-side validation
      const payerName = document.getElementById("payerName").value;
      const payerEmail = document.getElementById("payerEmail").value;
      const invoiceNumber = document.getElementById("invoiceNumber").value;
      const amount = document.getElementById("amount").value;

      if (!payerName || !payerEmail || !invoiceNumber || !amount) {
        document.getElementById("payment-status").textContent = "Please fill in all required fields.";
        return;
      }

      // Disable button to prevent double submission
      const submitBtn = document.getElementById("submit");
      submitBtn.disabled = true;
      document.getElementById("payment-status").textContent = "Creating payment intent...";

      // Create PaymentIntent on the server
      try {
        const res = await fetch("/create-payment-intent", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            amount: Math.round(parseFloat(amount) * 100), // amount in cents
            currency: "usd",
            invoice: invoiceNumber,
            receipt_email: payerEmail
          })
        });
        const data = await res.json();
        if (data.error) {
          throw data.error;
        }

        const clientSecret = data.clientSecret;
        // Confirm the card payment
        const result = await stripe.confirmCardPayment(clientSecret, {
          payment_method: {
            // Optionally pass billing details
            billing_details: {
              name: payerName,
              email: payerEmail
            }
          }
        });

        if (result.error) {
          document.getElementById("card-errors").textContent = result.error.message;
          document.getElementById("payment-status").textContent = "";
          submitBtn.disabled = false;
        } else {
          if (result.paymentIntent && result.paymentIntent.status === "succeeded") {
            document.getElementById("payment-status").textContent = "Payment succeeded!";
            document.getElementById("payment-status").className = "success";
            // Optional: redirect or show receipt
          }
        }
      } catch (err) {
        document.getElementById("card-errors").textContent = err?.message ?? "Payment failed.";
        document.getElementById("payment-status").textContent = "";
        submitBtn.disabled = false;
      }
    });
  </script>
</body>
</html>

